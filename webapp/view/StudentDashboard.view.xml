<mvc:View controllerName="project1.controller.StudentDashboard"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m"
    xmlns:core="sap.ui.core"
    xmlns:f="sap.ui.layout.form">
    <Page id="studentDashboardPage" title="{i18n>studentDashboardTitle}">
        <content>
            <VBox width="100%" renderType="Bare">
                <!-- Logged-in Student Profile -->
                <Panel headerText="Student Profile - Logged In" class="sapUiSmallMarginBottom">
                    <VBox class="sapUiSmallMargin">
                        <HBox>
                            <Label text="Name:" class="sapUiTinyMarginEnd"/>
                            <Text text="Alice Ng" class="sapUiTinyMarginEnd"/>
                            <Text text="(S1234567)" class="sapUiTinyMarginEnd"/>
                        </HBox>
                        <HBox>
                            <Label text="Email:" class="sapUiTinyMarginEnd"/>
                            <Text text="alice.ng@student.edu"/>
                        </HBox>
                        <HBox>
                            <Label text="Matriculation:" class="sapUiTinyMarginEnd"/>
                            <Text text="U1234567"/>
                        </HBox>
                        <HBox>
                            <Label text="Program:" class="sapUiTinyMarginEnd"/>
                            <Text text="Bachelor of Engineering (Software)"/>
                        </HBox>
                        <HBox>
                            <Label text="Year:" class="sapUiTinyMarginEnd"/>
                            <Text text="Year 2"/>
                        </HBox>
                        <Toolbar design="Transparent" class="sapUiTinyMarginTop">
                            <Label text="Assigned Advisor:" class="sapUiTinyMarginEnd"/>
                            <Text text="Dr. Tan (ADV001) - School of Engineering"/>
                        </Toolbar>
                        <MessageStrip text="{i18n>studentView}" type="Information" showIcon="true" class="sapUiTinyMarginTop"/>
                    </VBox>
                </Panel>

                <!-- Available Slots to Book -->
                <Table id="tblFreeSlots" width="100%" items="{appointments>/freeSlots}" alternateRowColors="true" class="sapUiSmallMarginTop">
                    <headerToolbar>
                        <Toolbar>
                            <Title text="{i18n>availableSlotsToBook}" level="H3"/>
                            <ToolbarSpacer/>
                            <Button icon="sap-icon://refresh" text="Refresh" type="Transparent" press="onRefreshSlots"/>
                        </Toolbar>
                    </headerToolbar>
                    <columns>
                        <Column minScreenWidth="Tablet" demandPopin="true"><Text text="{i18n>date}"/></Column>
                        <Column minScreenWidth="Tablet" demandPopin="true"><Text text="{i18n>time}"/></Column>
                        <Column minScreenWidth="Tablet" demandPopin="true"><Text text="{i18n>duration}"/></Column>
                        <Column width="8rem" minScreenWidth="Desktop"><Text text="{i18n>actions}"/></Column>
                    </columns>
                    <items>
                        <ColumnListItem>
                            <cells>
                                <Text text="{appointments>date}" wrapping="true"/>
                                <Text text="{appointments>time}" wrapping="true"/>
                                <Text text="{appointments>duration}" wrapping="true"/>
                                <HBox justifyContent="End" wrap="Wrap">
                                    <Button text="{i18n>bookNow}" type="Emphasized" press="onBookSlot"/>
                                </HBox>
                            </cells>
                        </ColumnListItem>
                    </items>
                </Table>

                <!-- My Booked Appointments -->
                <Table id="tblMyBookings" width="100%" items="{appointments>/myBookedSlots}" alternateRowColors="true" class="sapUiSmallMarginTop">
                    <headerToolbar>
                        <Toolbar>
                            <Title text="{i18n>myBookedAppointments}" level="H3"/>
                        </Toolbar>
                    </headerToolbar>
                    <columns>
                        <Column minScreenWidth="Tablet" demandPopin="true"><Text text="{i18n>date}"/></Column>
                        <Column minScreenWidth="Tablet" demandPopin="true"><Text text="{i18n>time}"/></Column>
                        <Column minScreenWidth="Tablet" demandPopin="true"><Text text="{i18n>duration}"/></Column>
                        <Column width="10rem" minScreenWidth="Desktop"><Text text="{i18n>actions}"/></Column>
                    </columns>
                    <items>
                        <ColumnListItem>
                            <cells>
                                <Text text="{appointments>date}" wrapping="true"/>
                                <Text text="{appointments>time}" wrapping="true"/>
                                <Text text="{appointments>duration}" wrapping="true"/>
                                <HBox justifyContent="End" wrap="Wrap">
                                    <Button text="{i18n>cancelBooking}" type="Transparent" press="onCancelBooking"/>
                                </HBox>
                            </cells>
                        </ColumnListItem>
                    </items>
                </Table>
            </VBox>
        </content>
    </Page>
</mvc:View>
